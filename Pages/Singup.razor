@page "/singup"
@using Checker.Services
@using Checker.Models
@inject AuthService AuthService

@code{
    private SingUpModel singUpModel = new SingUpModel();

    private async Task HandelSingUp(){    

    string password = singUpModel.password;
    string passwordHash = BCrypt.Net.BCrypt.EnhancedHashPassword(password, 4);
    singUpModel.password = passwordHash;    

        try{
            var token = await AuthService.SingUpAsyc(singUpModel);
            singUpModel = new SingUpModel();
            Console.WriteLine(token.message);
        }
        catch (Exception ex){
            Console.WriteLine("Eroare la creare cont: " + ex.Message);
        }
    }
};    


    <div class="col-lg-6 offset-lg-3" >
    <h1>Sing up</h1>
    <div class="row justify-content-center">
        <EditForm  Model="singUpModel" OnValidSubmit="HandelSingUp">
            <DataAnnotationsValidator />

            <div class="mb-3" >
                <label class="form-label" >Username:</label>
                <InputText class="form-control"  @bind-Value="singUpModel.email" />
                <ValidationMessage For="() => singUpModel.email"/>
            </div>

            <div class="mb-3" >
                <label class="form-label" >Password:</label>
                <InputText class="form-control" @bind-Value="singUpModel.password" type="password" />
                <ValidationMessage For="() => singUpModel.password"/>
            </div>

            <button class="btn btn-primary" type="submit">Login</button>

        </EditForm>
    </div>
</div>

